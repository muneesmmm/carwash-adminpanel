"use strict";(self["webpackChunkcarwash_adminpanel"]=self["webpackChunkcarwash_adminpanel"]||[]).push([[996],{9596:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});var s=a(376),i=a(4064),r=a(8776),n=a(4488),c=a(3796),l=a(820),o=a(5660),h=a(9832),d=a(8792),u=a(1960),m=a(7284),p=a(3380),f=a(5924),v=a(6236),D=a(5496),_=a(2752);const y=(0,_.c)(f.c,(0,p.i)("tabsBar"),v.c);var g=y.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0},tabValue:{required:!1}},data:()=>({proxyClass:"v-tab--active"}),computed:{classes(){return{"v-tab":!0,...f.c.options.computed.classes.call(this),"v-tab--disabled":this.disabled,...this.groupClasses}},value(){if(null!=this.tabValue)return this.tabValue;let t=this.to||this.href;if(null==t)return t;if(this.$router&&this.to===Object(this.to)){const e=this.$router.resolve(this.to,this.$route,this.append);t=e.href}return t.replace("#","")}},methods:{click(t){this.disabled?t.preventDefault():(this.href&&this.href.indexOf("#")>-1&&t.preventDefault(),t.detail&&this.$el.blur(),this.$emit("click",t),this.to||this.toggle())},toggle(){this.isActive&&(this.tabsBar.mandatory||this.to)||this.$emit("change")}},render(t){const{tag:e,data:a}=this.generateRouteLink();return a.attrs={...a.attrs,"aria-selected":String(this.isActive),role:"tab",tabindex:this.disabled?-1:0},a.on={...a.on,keydown:t=>{t.keyCode===D.cJ.enter&&this.click(t),this.$emit("keydown",t)}},t(e,a,this.$slots.default)}}),x=a(2480),b=a(8500),w=function(){var t=this,e=t._self._c;return e(c.c,{attrs:{id:"customer-profile",fluid:"",tag:"section"}},[e(m.c,{attrs:{justify:"center"}},[e(n.c,{attrs:{cols:"12",md:"6"}},[e("base-material-card",{scopedSlots:t._u([{key:"heading",fn:function(){return[e("div",{staticClass:"display-2 font-weight-light"},[t._v("Profile")])]},proxy:!0}])},[e(r.c$,{staticClass:"text-left"},[e("h6",{staticClass:"display-2 font-weight-black mb-1 black--text"},[t._v(" "+t._s(t.userData.name)+" ")]),e("h4",{staticClass:"display-2 font-weight-light mb-3 black--text"},[t._v(" "+t._s(t.userData.role)+" ")]),e("h6",{staticClass:"display-1 mb-1 grey--text"},[t._v(" "+t._s(t.userData.email)+" ")]),e("h6",{staticClass:"display-1 mb-1 grey--text"},[t._v(" "+t._s(t.userData.phone)+" ")]),e("div",{staticClass:"text-center"},[e(h.c,{staticClass:"my-2"}),e("div",{staticClass:"d-flex justify-space-between"},[e("span",{staticClass:"font-weight-bold h3"},[t._v("Vehicles")]),e("span",{staticClass:"font-weight-bold h3"},[t._v(": "+t._s(t.userData.vehicles?.length))])]),e(h.c,{staticClass:"my-2"}),t._l(t.userData.vehicles,(function(a,s){return e(i.c,{key:s,staticClass:"px-3 py-3 d-flex justify-space-between font-weight-bold",attrs:{light:"",outlined:""}},[e("span",[t._v(t._s(a.vehicleNumber))]),e("span",[t._v(t._s(a.type))])])}))],2)])],1),e("base-material-card",{scopedSlots:t._u([{key:"heading",fn:function(){return[e("div",{staticClass:"display-2 font-weight-light"},[t._v("Packages")])]},proxy:!0}])},[e(r.c$,{staticClass:"text-center"},[e(l.c,{attrs:{headers:t.packageHeaders,items:t.packages},scopedSlots:t._u([{key:"item.status",fn:function({item:e}){return[t._v(" "+t._s(t.packageStatus(e))+" ")]}}],null,!0)})],1)],1)],1),e(n.c,{attrs:{cols:"12",md:"6"}},[e("base-material-card",{scopedSlots:t._u([{key:"heading",fn:function(){return[e("div",{staticClass:"display-2 font-weight-light"},[t._v("Wash History")]),e("div",{staticClass:"subtitle-1 font-weight-light"},[t._v(" Total Completed Washes ")])]},proxy:!0}])},[t.userData?e(i.c,[e(x.c,{attrs:{"background-color":"primary"},model:{value:t.selectedVehicle,callback:function(e){t.selectedVehicle=e},expression:"selectedVehicle"}},t._l(t.userData.vehicles,(function(a){return e(g,{key:a._id,attrs:{value:a._id}},[t._v(" "+t._s(a.vehicleNumber)+" ")])})),1)],1):t._e(),e(m.c,[e(n.c,{staticClass:"d-flex justify-end",attrs:{cols:"12",md:"12"}},[e(s.c,{attrs:{small:"",color:"primary"},on:{click:t.exportToPDF}},[e(d.c,{staticClass:"mr-1"},[t._v("mdi-file-download-outline")]),t._v("Export to PDF")],1),e(s.c,{attrs:{small:"",color:"primary"},on:{click:t.exportToExcel}},[e(d.c,{staticClass:"mr-1"},[t._v("mdi-file-download-outline")]),t._v("Export to Excel")],1)],1)],1),e(m.c,[e(n.c,{attrs:{cols:"12",md:"6"}},[e(u.c,{attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","max-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b.c,t._g({attrs:{label:"Start Date",readonly:"",solo:"",dense:"","append-icon":"mdi-calendar"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}},a))]}}]),model:{value:t.menuStart,callback:function(e){t.menuStart=e},expression:"menuStart"}},[e(o.c,{attrs:{scrollable:""},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1)],1),e(n.c,{attrs:{cols:"12",md:"6"}},[e(u.c,{attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","max-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b.c,t._g({attrs:{solo:"",label:"End Date",readonly:"",dense:"","append-icon":"mdi-calendar"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}},a))]}}]),model:{value:t.menuEnd,callback:function(e){t.menuEnd=e},expression:"menuEnd"}},[e(o.c,{attrs:{scrollable:""},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1)],1)],1),e(l.c,{attrs:{headers:t.headers,items:t.filteredItems},scopedSlots:t._u([{key:"item._id",fn:function({item:a,index:s}){return[a?e("span",[t._v(t._s(s+1))]):t._e()]}},{key:"item.vehicle",fn:function({item:e}){return[t._v(" "+t._s(e.vehicle?.vehicleNumber)+" ")]}},{key:"item.type",fn:function({item:e}){return[t._v(" "+t._s(e.vehicle?.type)+" ")]}},{key:"item.time",fn:function({item:e}){return[t._v(" "+t._s(t.getWashTime(e.washDate))+" ")]}},{key:"item.date",fn:function({item:e}){return[t._v(" "+t._s(t.getDate(e.washDate))+" ")]}},{key:"item.action",fn:function({item:a}){return[e(s.c,{attrs:{color:"success"},on:{click:function(e){return t.viewDetails(a._id)}}},[t._v("view")]),e(s.c,{attrs:{color:"red"}},[t._v("Delete")])]}}],null,!0)})],1)],1)],1)],1)},k=[],C=a(7412),S=a.n(C),$=a(2774),E=a(5948),T=(a(8200),a(1532)),W={data(){return{packageHeaders:[{text:"Name",value:"plan.name"},{text:"Duration",value:"plan.duration"},{text:"Remaining Wash",value:"remainingWashes"},{text:"Remaining Interior",value:"remainingInteriors"},{text:"Status",value:"status"}],headers:[{text:"ID",value:"_id"},{text:"Vehicle",value:"vehicle"},{text:"Car  Type",value:"type"},{text:"Wash Date",value:"date"},{text:"Wash Time",value:"time"}],userData:[],todayWashes:[],washHistory:[],isUpdate:!1,newPassword:"",search:"",startDate:null,endDate:null,menuStart:!1,menuEnd:!1,selectedVehicle:null,packages:[]}},created(){this.fetchUserData(),this.fetchPackageData()},computed:{filteredItems(){let t=this.washHistory;if(this.startDate&&this.endDate){const e=new Date(this.startDate),a=new Date(this.endDate);t=t.filter((t=>{const s=new Date(t.washDate);return s>=e&&s<=a}))}return t}},watch:{selectedVehicle:{handler(){this.fetchTotalData(this.selectedVehicle)}}},methods:{async fetchUserData(){try{const t=this.$route.params.id,e=await $.c.post(`/customer/${t}`,{id:t});if(!e.status)throw new Error("Failed to fetch user data");this.userData=e.data.customer}catch(t){console.error("Error fetching user data:",t)}},async fetchPackageData(){try{const t=this.$route.params.id,e=await $.c.post(`/get-customer-packages/${t}`,{headers:{"Content-Type":"application/json"}});if(!e)throw new Error("Failed to fetch user data");this.packages=e.data.data}catch(t){console.error("Error fetching user data:",t)}},async fetchTotalData(t){try{const e=await $.c.post(`/get-vehicle-washes/${this.userData.vehicles[t]._id}`,{headers:{"Content-Type":"application/json"}});if(!e.status)throw new Error("Failed to fetch user data");return this.washHistory=e.data.data,this.washHistory}catch(e){console.error("Error fetching user data:",e)}},getWashTime(t){return S()(t).format("h:mm A")},getDate(t){return S()(t).format("Do MMM YYYY")},exportToPDF(){const t=new E.jsPDF,e=this.headers.map((t=>t.text)),a=this.filteredItems.map(((t,e)=>{const a=this.getDate(t.washDate),s=this.getWashTime(t.washDate);return[e+1,t.vehicle.vehicleNumber,t.vehicle.type,a,s]}));t.setFontSize(16),t.text("Car Wash Details of "+this.userData.name+this.getDate(new Date),10,10),t.autoTable({head:[e],body:a}),t.save(this.userData.name+"_"+this.getDate(new Date)+".pdf")},exportToExcel(){const t=this.headers.map((t=>t.text)),e=this.filteredItems.map(((t,e)=>{const a=this.getDate(t.washDate),s=this.getWashTime(t.washDate);return[e+1,t.vehicle.vehicleNumber,t.vehicle.type,a,s]})),a=T.c$.aoa_to_sheet([t,...e]),s=T.c$.book_new();T.c$.book_append_sheet(s,a,"Sheet1"),T.a8(s,this.userData.name+"_"+this.getDate(new Date)+".xlsx")},packageStatus(t){const e=new Date,a=new Date(t.endDate);return e>a||0===t.remainingWashes||0===t.remainingInteriors?"Expired":"Active"}}},V=W,j=a(2528),P=(0,j.c)(V,w,k,!1,null,null,null),F=P.exports}}]);
//# sourceMappingURL=996.fb942b7f.js.map